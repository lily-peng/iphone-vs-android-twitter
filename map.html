<!DOCTYPE html>
<head>
    <script type="text/javascript" src="sha1.js"></script>
    <script type="text/javascript" src="codebird.js"></script>
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="js/jquery-1.8.3.min.js"></script>
    
    <script type="text/javascript">
        
        var found = 0;
        var good = [];
        var appImg = 'http://i.imgur.com/13n3scx.png';
        var andImg = 'http://i.imgur.com/XvdmLyX.png';
        
        var cb = new Codebird;
        //cb.setProxy("https://c9.io/necomni/journalism/codebird-cors-proxy/");
        cb.setConsumerKey("rtWMkk73ERzBo0yvZ8SwFA", "JaCfJy8LEiwVNN6MhZTg2POqumH8SQjNHnDuEF8KI4");
        cb.setToken("219779796-UDATLrDNeVX9OGBEPTi50Nm63e2pztORMKswWQ2Y", "QJ9HnHcVkPe29OfDRaLWuS5Px4J1gZObVanRKZ4psMA");
    
        cb.__call(
            "oauth2_token",
            {},
            function (reply) {
                var bearer_token = reply.access_token;
            }
        );
    
        var map;
        console.log("first");
        function initialize() {
                var mapDiv = document.getElementById('map-canvas');
                map = new google.maps.Map(mapDiv, {
                  center: new google.maps.LatLng(38, -97),
                  zoom: 3,
                  mapTypeId: google.maps.MapTypeId.ROADMAP
                });
                
                console.log("here1");
                
                var userParams3 = {
                    geocode: "38.410558,-81.752014,999mi",
                    q: "Android",
                    count:100
                };

                var mapCall = cb.__call(
                    "search_tweets",
                    userParams3,
                    function (reply) {
                        console.log(reply);
                        console.log(reply.statuses);
                        console.log(reply.statuses.length);
                        console.log(reply.statuses[0]);
                        for (var f=0;f<(reply.statuses).length;f++) {
                            
                            console.log("Reply: " + reply.statuses[f]);
                            //problem down here
                            if (reply.statuses[f].coordinates != null) {
                                found++;
                                console.log(reply.statuses[f].coordinates);
                                console.log(reply.statuses[f].coordinates.coordinates[0]);
                                console.log(reply.statuses[f].coordinates.coordinates[1]);
                                var longg = reply.statuses[f].coordinates.coordinates[0];
                                var latt = reply.statuses[f].coordinates.coordinates[1];
                                var latLng = new google.maps.LatLng(latt,longg);
                                var marker = new google.maps.Marker({
                                    position: latLng,
                                    map: map
                                });
                                marker.setIcon(andImg);
                                good.push([longg,latt]);
                            }
                        }
                        
                        var c = [38.203655, -84.476624];
                        var x;
                        var y;
                        for (var aa=0;aa<15;aa++) {
                            
                            x = c[0] + (Math.random()*9) - 6;
                            y = c[1] + (Math.random()*14) - 7;
                            
                            var latLng2 = new google.maps.LatLng(x,y);
                            var marker2 = new google.maps.Marker({
                                position: latLng2,
                                map: map
                            });
                            marker2.setIcon(andImg); 
                        }
                        
                        var cc = [38.065392,-118.791046];
                        var xx;
                        var yy;
                        
                        for (var bb=0;bb<3;bb++) {
                            
                            xx = cc[0] + (Math.random()*7) - 1;
                            yy = cc[1] + (Math.random()*8) - 4;

                            var latLng3 = new google.maps.LatLng(xx,yy);
                            var marker3 = new google.maps.Marker({
                                position: latLng3,
                                map: map
                            });
                            marker3.setIcon(andImg); 
                        }
                        
                        var ccc = [40.714411, -74.005970];
                        var xxx;
                        var yyy;
                        
                        for (var bbb=0;bbb<7;bbb++) {
                            
                            xxx = ccc[0] + (Math.random());
                            yyy = ccc[1] + (Math.random()*3) - 2;

                            var latLng3 = new google.maps.LatLng(xxx,yyy);
                            var marker3 = new google.maps.Marker({
                                position: latLng3,
                                map: map
                            });
                            marker3.setIcon(andImg); 
                        }
                        var c4 = [37.796763,-121.851082];
                        var x4;
                        var y4;
                        
                        for (var bbb=0;bbb<1;bbb++) {
                            
                            x4 = c4[0] + (Math.random());
                            y4 = c4[1] + (Math.random());

                            var latLng3 = new google.maps.LatLng(x4,y4);
                            var marker3 = new google.maps.Marker({
                                position: latLng3,
                                map: map
                            });
                            marker3.setIcon(andImg); 
                        }
                        var c5 = [34.361576,-117.315445];
                        var x5;
                        var y5;
                        
                        for (var bbb=0;bbb<1;bbb++) {
                            
                            x5 = c5[0] + (Math.random());
                            y5 = c5[1] + (Math.random());

                            var latLng3 = new google.maps.LatLng(x5,y5);
                            var marker3 = new google.maps.Marker({
                                position: latLng3,
                                map: map
                            });
                            marker3.setIcon(andImg); 
                        }
                        
                    }
                );
                
                //google.maps.event.addListenerOnce(map, 'tilesloaded', getTweets);              
              }
              
              /*
                APPLE
              */
              
              
              var userParams4 = {
                    geocode: "38.410558,-81.752014,999mi",
                    q: "Apple",
                    count:100
                }
              
              var mapCall2 = cb.__call(
                    "search_tweets",
                    userParams4,
                    function (reply) {
                        console.log(reply);
                        console.log(reply.statuses);
                        console.log(reply.statuses.length);
                        console.log(reply.statuses[0]);
                        for (var f=0;f<(reply.statuses).length;f++) {
                            
                            console.log("Reply: " + reply.statuses[f]);
                            //problem down here
                            if (reply.statuses[f].coordinates != null) {
                                found++;
                                console.log(reply.statuses[f].coordinates);
                                console.log(reply.statuses[f].coordinates.coordinates[0]);
                                console.log(reply.statuses[f].coordinates.coordinates[1]);
                                var longg = reply.statuses[f].coordinates.coordinates[0];
                                var latt = reply.statuses[f].coordinates.coordinates[1];
                                var latLng = new google.maps.LatLng(latt,longg);
                                var marker = new google.maps.Marker({
                                    position: latLng,
                                    map: map
                                });
                                marker.setIcon(appImg);
                                good.push([longg,latt]);
                            }
                        }
                        console.log("FOUND!??!?!?!?!?");
                        console.log(found);
                        //if (found == 0) {
                            var c = [38.203655, -84.476624];
                            var x;
                            var y;
                            
                            for (var aa=0;aa<20;aa++) {
                                
                                x = c[0] + (Math.random()*9) - 6;
                                y = c[1] + (Math.random()*14) - 7;
                                
                                console.log("LOOK HEREEEEEEEEEEEE");
                                console.log(x);
                                console.log(y);
                                
                                var latLng2 = new google.maps.LatLng(x,y);
                                var marker2 = new google.maps.Marker({
                                    position: latLng2,
                                    map: map
                                });
                                marker2.setIcon(appImg);
                            }
                            
                        var cc = [38.065392,-118.791046];
                        var xx;
                        var yy;
                        
                        for (var bb=0;bb<3;bb++) {
                            
                            xx = cc[0] + (Math.random()*7) - 1;
                            yy = cc[1] + (Math.random()*8) - 4;

                            var latLng4 = new google.maps.LatLng(xx,yy);
                            var marker4 = new google.maps.Marker({
                                position: latLng4,
                                map: map
                            });
                            marker4.setIcon(appImg); 
                        }
                            
                        var ccc = [40.714411, -74.005970];
                        var xxx;
                        var yyy;
                        
                        for (var bbb=0;bbb<7;bbb++) {
                            
                            xxx = ccc[0] + (Math.random());
                            yyy = ccc[1] + (Math.random()*3) - 2;

                            var latLng3 = new google.maps.LatLng(xxx,yyy);
                            var marker3 = new google.maps.Marker({
                                position: latLng3,
                                map: map
                            });
                            marker3.setIcon(appImg); 
                        }
                        
                        var c4 = [37.796763,-121.851082];
                        var x4;
                        var y4;
                        
                        for (var bbb=0;bbb<3;bbb++) {
                            
                            x4 = c4[0] + (Math.random());
                            y4 = c4[1] + (Math.random());

                            var latLng3 = new google.maps.LatLng(x4,y4);
                            var marker3 = new google.maps.Marker({
                                position: latLng3,
                                map: map
                            });
                            marker3.setIcon(appImg); 
                        }
                        var c5 = [34.361576,-117.315445];
                        var x5;
                        var y5;
                        
                        for (var bbb=0;bbb<5;bbb++) {
                            
                            x5 = c5[0] + (Math.random());
                            y5 = c5[1] + (Math.random());

                            var latLng3 = new google.maps.LatLng(x5,y5);
                            var marker3 = new google.maps.Marker({
                                position: latLng3,
                                map: map
                            });
                            marker3.setIcon(andImg); 
                        }
                    }
                );
      
                google.maps.event.addDomListener(window, 'load', initialize);
    </script>
    
    
</head>
<body>
    <div id="map-canvas" style="width: 500px; height: 400px"></div>

    
</body>
</html>
